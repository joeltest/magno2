<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:siscop="http://www.mytags.com/schema/mytags"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>

        <ui:composition template="./WEB-INF/templates/template.xhtml">        
            <ui:define name="content"> 
                <!-- <ui:include src="fragmentoLoader.xhtml"/>-->
                
                <style>
                    .btn-product{
                        width: 100%;
                    }
                </style>
                
                <!--<script>
                    $("#formImagen://idImagenDetall")
                    PF('popup').show();
                </script>  -->         

                <h:form>
                    <div class="panel-body">
                        <h3>#{productoIniciarCompraBean.categoriaActiva.nombre}</h3>
                    </div>

                    <div class="col-md-12">
                        <!--<div class="col-md-12">
                            <div class="panel panel-primary" style="background-color: #219FD1;">
                                <div class="panel-body">
                                    Marcas
                                </div>
                            </div>
                        </div>-->
                        <div class="panel panel-success">
                            <!--<div class="panel-heading">
                                <h3>#{productoIniciarCompraBean.categoriaActiva.nombre}</h3>
                            </div>-->   
                            <div class="panel-body">
                                
                                
                                
                                <p:dataGrid id="productos"
                                            var="item"
                                            value="#{productoIniciarCompraBean.listaProductos}" 
                                            columns="3" 
                                            layout="grid"
                                            rows="12" 
                                            paginator="true"                         
                                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                            rowsPerPageTemplate="6,12,16">
                                    <f:facet name="header">
                                        Titulo
                                    </f:facet>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-8 col-lg-12">
                                                    <div class="thumbnail">
                                                        <h2 class="text-center">
                                                            <span class="label label-info">
                                                                #{item.marcaId.nombre}
                                                            </span>
                                                        </h2>
                                                        <a onclick="PF('popup').show();">
                                                            <img src="/magno/AbrirImage?ID=#{item.siArchivo.id}" alt="..." 
                                                                 data-toggle="magnify"
                                                                 class="img-responsive img-rounded center-block" 
                                                                 />
                                                        </a>
                                                        <div class="caption">
                                                            <div class="row">
                                                                <div class="col-md-12 col-xs-6">
                                                                    <h3>#{item.nombre}</h3>
                                                                </div>
                                                                <div class="col-md-6 col-xs-6 price">
                                                                    <h3>
                                                                        <label>$ #{item.precio}</label>
                                                                    </h3>
                                                                </div>
                                                            </div>

                                                            <p:inputTextarea value="#{item.descripcion}"
                                                                             autoResize="true"
                                                                             styleClass="col-md-12"
                                                                             readonly="true"
                                                                             rows="5"
                                                                             />
                                                            <p/>
                                                            <div class="row">
                                                                <div class="col-md-6">                                                                               
                                                                    <h:commandLink styleClass="btn btn-warning btn-product glyphicon glyphicon-shopping-cart"                                                                                   
                                                                                   action="/carritoCompras.xhtml?faces-redirect=true"
                                                                                   actionListener="#{productoIniciarCompraBean.agregarProductoACarrito(event)}"
                                                                                   value="Agregar">   
                                                                        <f:param name="idProducto" value="#{item.id}"/>
                                                                    </h:commandLink>                                                
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <h:commandLink styleClass="btn btn-success btn-product glyphicon glyphicon-modal-window "
                                                                                   action="/detalleProducto.xhtml?faces-redirect=true"
                                                                                   actionListener="#{productoIniciarCompraBean.verDetalleProducto(event)}"
                                                                                   value="Detalle"                                                               
                                                                                   >
                                                                        <f:param name="idProducto" value="#{item.id}"/>
                                                                    </h:commandLink>
                                                                </div>

                                                                <p> </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                           
                                </p:dataGrid>
                            </div>
                        </div>
                    </div>
                </h:form>

                <h:form id="formImagen">
                    <siscop:dialog widgetVar="popup"
                                   titulo="Detalle de imagen"                                                                                      
                                   >
                        <ui:define name="cuerpo">  
                            <img id="idImagenDetalle"          
                                 src="/magno-1.0-SNAPSHOT/AbrirImage?ID=2" alt="..."
                                 class="img-responsive img-rounded center-block" 
                                 />
                        </ui:define>
                        <ui:define name="pie">
                            <p:commandLink value="Cerrar"                                        
                                           onclick="PF('popup').hide();"                                           
                                           styleClass="btn btn-default"                                          
                                           />  
                        </ui:define>
                    </siscop:dialog>
                </h:form>

            </ui:define>
        </ui:composition>

    </body>
</html>
